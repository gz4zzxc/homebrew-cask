---
alwaysApply: true
description: 保证 Casks 与 README 的版本一致性，并与自动化工作流配合
---

## 版本同步与自动化更新

当应用版本更新时，需同步更新：

- `Casks/{app}.rb`：`version` 与 `sha256`（多架构需分别更新）
- `README.md`：应用表格中的版本号需与 cask 一致；若为复合版本（如 `25.7.1,1178`），表格仅显示主版本（例如 `25.7.1`）

自动化（GitHub Actions）应当：

1. 检查新版本并下载新包，计算 SHA256
2. 用 `sed`/脚本更新 cask 与 README
3. 使用标准化提交信息进行提交
4. 在 CI 中至少校验：
   - Ruby 语法：`ruby -c Casks/{app}.rb`
   - README 中包含正确的应用标识

参考流程与格式详见：[CONTRIBUTING.md](mdc:CONTRIBUTING.md)

### 复合版本的展示

若 `version` 为 `x.y.z,build`：

```bash
NEW_VERSION_DISPLAY=$(echo "$NEW_VERSION" | cut -d',' -f1)
```

在 `README.md` 仅展示 `NEW_VERSION_DISPLAY`。

