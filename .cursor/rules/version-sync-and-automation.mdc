---
alwaysApply: true
description: 保证 Casks 与 README 的版本一致性，并与自动化工作流配合
---

## 版本同步与自动化更新

当应用版本更新时，需同步更新以下内容：

### 需要更新的文件

- **`Casks/{app}.rb`**：`version` 与 `sha256`（多架构需分别更新）
- **`README.md`**：应用表格中的版本号需与 cask 一致

### 复合版本处理

若为复合版本（如 `25.7.1,1178`），表格仅显示主版本（例如 `25.7.1`）

### 自动化工作流要求

GitHub Actions 应当执行以下步骤：

1. **检查新版本**并下载新包，计算 SHA256
2. **更新文件**：用 `sed`/脚本更新 cask 与 README
3. **标准化提交**：使用标准化提交信息进行提交
4. **CI 校验**：至少校验以下内容：
   - Ruby 语法：`ruby -c Casks/{app}.rb`
   - README 中包含正确的应用标识

### 复合版本展示示例

若 `version` 为 `x.y.z,build`：

```bash
NEW_VERSION_DISPLAY=$(echo "$NEW_VERSION" | cut -d',' -f1)
```

在 `README.md` 仅展示 `NEW_VERSION_DISPLAY`。

### 参考文档

参考流程与格式详见：[CONTRIBUTING.md](mdc:CONTRIBUTING.md)

